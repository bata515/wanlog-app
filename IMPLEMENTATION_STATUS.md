# WanLog - 機能実装状況チェックリスト

## 2.1 ユーザー認証機能

### 2.1.1 ユーザー登録
- [ ] メールアドレス + パスワードでの登録
  - 実装状況: tRPC procedure `auth.register` 実装済み
  - 問題: UIページがない、テストされていない
- [ ] Google OAuth での登録
  - 実装状況: Manus OAuth 統合済み
  - 問題: ログインページから直接ログイン可能だが、登録フローが不明確
- [ ] ユーザー名の設定（必須、重複不可）
  - 実装状況: スキーマに `username` カラムあり、重複チェック実装
  - 問題: UIでユーザー名設定フローがない
- [ ] プロフィール画像の設定（任意）
  - 実装状況: プロフィール編集ページで実装
  - 問題: 登録時には設定できない

**受け入れ条件**:
- [ ] メールアドレスとパスワードで登録できる - **未実装**
- [ ] Google OAuth で登録できる - **部分実装**（ログインのみ）
- [ ] バリデーションエラーが適切に表示される - **未実装**
- [ ] 登録後、自動的にログイン状態になる - **未実装**
- [ ] 登録完了後、ダッシュボードへリダイレクトされる - **未実装**

### 2.1.2 ログイン
- [ ] メールアドレス + パスワードでのログイン
  - 実装状況: tRPC procedure `auth.login` 実装済み
  - 問題: UIページがない
- [ ] Google OAuth でのログイン
  - 実装状況: Manus OAuth 統合済み、Login.tsx で実装
  - 問題: テストされていない
- [ ] ログイン状態の保持（セッション管理）
  - 実装状況: Manus OAuth で自動管理
  - 問題: 確認不足

**受け入れ条件**:
- [ ] メールアドレスとパスワードでログインできる - **未実装**
- [ ] Google OAuth でログインできる - **実装済み**
- [ ] 認証情報が誤っている場合、適切なエラーメッセージが表示される - **未実装**
- [ ] ログイン後、ダッシュボードへリダイレクトされる - **未実装**
- [ ] セッションが保持され、ページ遷移後もログイン状態が維持される - **未確認**

### 2.1.3 ログアウト
**受け入れ条件**:
- [ ] ログアウトボタンをクリックするとログアウトできる - **実装済み**
- [ ] ログアウト後、ホームページへリダイレクトされる - **未確認**
- [ ] セッションがクリアされる - **実装済み**

### 2.1.4 プロフィール管理
**受け入れ条件**:
- [ ] プロフィール情報を編集できる - **実装済み**
- [ ] プロフィール画像をアップロードできる - **実装済み（S3統合）**
- [ ] 変更内容が即座に反映される - **未確認**
- [ ] バリデーションエラーが適切に表示される - **未実装**

---

## 2.2 投稿機能（CRUD）

### 2.2.1 投稿作成
**受け入れ条件**:
- [ ] タイトルと本文を入力して投稿できる - **実装済み**
- [ ] 画像を最大 5 枚までアップロードできる - **実装済み（S3統合、postId エラー修正済み）**
- [ ] タグを複数選択・作成できる - **実装済み**
- [ ] 下書き保存ができる - **実装済み**
- [ ] バリデーションエラーが適切に表示される - **部分実装**
- [ ] 投稿完了後、投稿詳細ページへリダイレクトされる - **実装済み**

### 2.2.2 投稿一覧表示
**受け入れ条件**:
- [ ] 公開投稿が一覧表示される - **実装済み**
- [ ] ページネーションが機能する - **実装済み**
- [ ] 各投稿カードに必要な情報が表示される - **実装済み**
- [ ] 投稿カードをクリックすると詳細ページへ遷移する - **実装済み**

### 2.2.3 投稿詳細表示
**受け入れ条件**:
- [ ] 投稿の全情報が表示される - **実装済み**
- [ ] 画像が適切に表示される（複数の場合はスライダーなど） - **実装済み**
- [ ] 投稿者の情報が表示される - **実装済み**
- [ ] いいね・コメント機能が利用できる - **実装済み**

### 2.2.4 投稿編集
**受け入れ条件**:
- [ ] 投稿者本人のみ編集ボタンが表示される - **未実装**
- [ ] 既存内容が編集フォームに反映される - **未実装**
- [ ] 変更内容を保存できる - **未実装**
- [ ] 画像の追加・削除ができる - **未実装**
- [ ] バリデーションエラーが適切に表示される - **未実装**

### 2.2.5 投稿削除
**受け入れ条件**:
- [ ] 投稿者本人のみ削除ボタンが表示される - **未実装**
- [ ] 削除前に確認ダイアログが表示される - **未実装**
- [ ] 削除実行後、投稿一覧ページへリダイレクトされる - **未実装**
- [ ] 関連データも削除される - **未実装**

---

## 2.3 画像アップロード機能

### 2.3.1 画像アップロード
**受け入れ条件**:
- [ ] 画像ファイルを選択してアップロードできる - **実装済み**
- [ ] ドラッグ&ドロップでアップロードできる - **未実装**
- [ ] プレビュー表示される - **実装済み**
- [ ] ファイルサイズ・形式のバリデーションが機能する - **部分実装**
- [ ] アップロード進捗が表示される - **未実装**
- [ ] エラー時に適切なメッセージが表示される - **部分実装**

### 2.3.2 画像表示
**受け入れ条件**:
- [ ] 画像が適切なサイズで表示される - **実装済み**
- [ ] 遅延読み込みが機能する - **未実装**
- [ ] ギャラリー表示が機能する - **実装済み**
- [ ] 拡大表示モーダルが機能する - **未実装**

---

## 2.4 コメント機能

### 2.4.1 コメント投稿
**受け入れ条件**:
- [ ] ログインユーザーがコメントできる - **実装済み**
- [ ] コメント投稿後、即座に表示される - **未確認**
- [ ] バリデーションエラーが適切に表示される - **未実装**
- [ ] 未ログインユーザーにはログイン促進メッセージが表示される - **未実装**

### 2.4.2 コメント表示
**受け入れ条件**:
- [ ] コメント一覧が表示される - **実装済み**
- [ ] 投稿者情報が表示される - **実装済み**
- [ ] 投稿日時が適切なフォーマットで表示される - **実装済み**

### 2.4.3 コメント削除
**受け入れ条件**:
- [ ] コメント投稿者本人のみ削除ボタンが表示される - **未実装**
- [ ] 削除前に確認ダイアログが表示される - **未実装**
- [ ] 削除後、即座にコメントが非表示になる - **未実装**

---

## 2.5 いいね機能

### 2.5.1 いいね追加
**受け入れ条件**:
- [ ] ログインユーザーがいいねボタンをクリックできる - **実装済み**
- [ ] いいね後、ボタンの表示が変わる（例: ハートが塗りつぶされる） - **実装済み**
- [ ] いいね数が増加する - **実装済み**
- [ ] ページをリロードしても状態が保持される - **未確認**
- [ ] 未ログインユーザーにはログイン促進メッセージが表示される - **未実装**

### 2.5.2 いいね削除（取り消し）
**受け入れ条件**:
- [ ] いいね済みのボタンをクリックすると取り消しできる - **実装済み**
- [ ] 取り消し後、ボタンの表示が元に戻る - **実装済み**
- [ ] いいね数が減少する - **実装済み**
- [ ] ページをリロードしても状態が保持される - **未確認**

---

## 2.6 タグ機能

### 2.6.1 タグ作成
**受け入れ条件**:
- [ ] 既存タグから選択できる - **実装済み**
- [ ] 新しいタグを作成できる - **実装済み**
- [ ] タグの重複が防止される - **実装済み**
- [ ] 最大 5 個の制限が機能する - **実装済み**

### 2.6.2 タグ一覧表示
**受け入れ条件**:
- [ ] タグ一覧が表示される - **実装済み**
- [ ] 使用回数が表示される - **実装済み**
- [ ] タグをクリックすると該当投稿一覧へ遷移する - **未実装**

### 2.6.3 タグ絞り込み
**受け入れ条件**:
- [ ] タグをクリックすると該当投稿のみ表示される - **未実装**
- [ ] 複数タグでの AND 検索ができる - **未実装**
- [ ] 絞り込み状態が URL に反映される - **未実装**

---

## 2.7 検索機能

### 2.7.1 キーワード検索
**受け入れ条件**:
- [ ] キーワードで投稿を検索できる - **実装済み**
- [ ] 検索結果が一覧表示される - **実装済み**
- [ ] マッチした箇所がハイライトされる - **未実装**
- [ ] 検索結果が 0 件の場合、適切なメッセージが表示される - **未実装**

### 2.7.2 検索結果表示
**受け入れ条件**:
- [ ] 検索キーワードが表示される - **実装済み**
- [ ] ヒット件数が表示される - **実装済み**
- [ ] 検索結果が一覧表示される - **実装済み**
- [ ] ページネーションが機能する - **実装済み**

---

## 総括

### 実装済み機能
- 基本的なユーザー認証（Manus OAuth）
- 投稿 CRUD（作成、一覧、詳細表示）
- 画像アップロード（S3統合）
- コメント機能（投稿・表示）
- いいね機能
- タグ機能（作成・表示）
- 検索機能

### 未実装・不完全な機能
- メール+パスワード登録・ログイン UI
- 投稿編集・削除
- コメント削除
- タグ絞り込み
- 画像ドラッグ&ドロップ
- 画像遅延読み込み
- 画像拡大表示
- 各種バリデーションエラー表示
- 未ログインユーザーへのメッセージ表示

### 主な問題点
1. **登録フローが不完全** - メール+パスワード登録 UI がない
2. **投稿編集・削除機能がない** - 仕様では必須
3. **コメント削除機能がない** - 仕様では必須
4. **タグ絞り込み機能がない** - 仕様では必須
5. **エラーハンドリングが不十分** - ユーザーへのフィードバックが不足
6. **ユースケースのテストが不足** - 実際のユーザーフローが検証されていない
